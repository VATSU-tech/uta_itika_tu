<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="uta itika tu" />
    <meta name="keywords" content="uta itika tu" />
    <meta name="author" content="VATSU" />
    <meta name="robots" content="index, follow" />
    <meta name="theme-color" content="var(--background)" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-TileColor" content="var(--background)" />
    <meta name="msapplication-TileImage" content="icon.svg" />
    <link rel="icon" href="icon.svg" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
      integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <title>uta itika tu</title>
  </head>
  <style>
    * {
      padding: 0;
      margin: 0;
      box-sizing: border-box;
      font-family:
        system-ui,
        -apple-system,
        BlinkMacSystemFont,
        "Segoe UI",
        Roboto,
        Oxygen,
        Ubuntu,
        Cantarell,
        "Open Sans",
        "Helvetica Neue",
        sans-serif;
      transition: 0.5s;
    }
    :root {
      --background: #ffb8b8;
      --color2: #ff6767;
      --color3: #ff000075;
      --white: #ff0000;
    }
    body {
      overflow: hidden;
      background-color: var(--background);
      color: var(--white);
      display: flex;
      justify-content: center;
      align-items:center;
      height: 100vh;
      position: relative; /* Needed for absolute positioning of children */
    }
    .container {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      background-color: transparent;
      padding: 2rem;
      border-radius: 2rem;
      text-align: center;
      box-shadow:
        var(--color2) 0 0 50rem,
        /* #0000002a 5px 5px 1rem, */
        var(--white) 5px 5px 1rem,
        var(--color3) 0 0 7rem inset;
      z-index: 10; /* Ensure content is above bubbles */
      position: relative;
    }
    .message{
      animation: header 2s ease-in-out;
    }
    @keyframes header {
      0%,100%{
        top: -2rem;
      }
      10%,70%{
        top: 1rem;
      }
    }
    .header{
      position: absolute;
      top: -1rem;
    }
    h1 {
      color:#ff6060;
      animation: fadenRed 2s ease-in-out infinite;
    }
    @keyframes fadenRed {
      0%,100%{
      text-shadow: #dee 0 0 5px;
      }
      50%{
      text-shadow: #ff6060 0 0 1px;
      }
      
    }
    section {
      display: flex;
      gap: 10px;
      padding: 0 20%;
      justify-content: center;
    }
    button {
      width: 100px;
      background-color: var(--background);
      border: 1px solid var(--color2);
      padding: 1rem;
      border-radius: 2rem;
      color: var(--white);
      position: relative; /* For movement */
    }
    button:hover {
      border-color: var(--color2);
      cursor: pointer;
      box-shadow: var(--color2) 0 0 1rem inset;
    }
    .hover {
      position: absolute; /* Allows free movement */
    }
    footer {
      position: absolute;
      bottom: 10px;
      z-index: 10;
    }
    a {
      text-decoration: none;
      opacity: .2;
      color: var(--white);
    }
    a:hover {
      opacity: 1;
    }

    /* Bubble Styles */
    .bulle {
      position: absolute;
      bottom: -100px; /* Start below screen */
      animation: rise linear forwards; /* 'forwards' helps debugging, but we remove element anyway */
      z-index: 1; /* Behind content */
      opacity: 0.7;
    }

    @keyframes rise {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      100% {
        transform: translateY(-120vh) rotate(360deg); /* Move up past viewport */
        opacity: 0;
      }
    }
  </style>
  <body>
    <div id="header" class="header">header</div>
    <div class="container">
      <h1 id="q">Veut tu etre ma valentine ?</h1>
      <section>
        <button id="yes" onclick='send("yes","Merci ðŸ’˜")' >Yes</button>
        <button id="button" ">No</button>
      </section>
    </div>
    <footer>
      <a href="https://github.com/VATSU-tech/uta_itika_tu.git"
        ><i class="fa-brands fa-github"></i> VATSU-tech</a
      >
    </footer>

    <script>
      const p = new URLSearchParams(location.search);
      const to = p.get("to") || "Valentine";
      const from = p.get("from") || "Quelquâ€™un";
      document.getElementById("q").innerHTML =
        `<span class='to'>${to}</span>` + ", veux-tu Ãªtre ma Valentine ?";

      function send(answer,message) {
        fetch("/api/respond", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ to, from, answer }),
        }).then(() => (document.querySelector('.container').innerHTML = "<h2>"+message+"</h2>"));
      }
    const btn = document.getElementById("button");
    const msg = document.getElementById('header');
    const root = document.documentElement;
    const container = document.querySelector(".container");

    const messages = ['Fais pas cet erreur','Derniere chance']

    btn.addEventListener("click", moveButton); // Also move on click if they manage to catch it

    function moveButton() {

      if(messages.length !== 0){
        msg.textContent = messages[0]  
        messages.splice(0,1)
      }
      else{
        send('no','Tu me rend vraiment triste')
        root.style.setProperty('--background', '#444')
      }
      

      msg.classList.add('message')
      // msg.style.animation = 'header 2s ease-in-out'
      setTimeout(()=> msg.classList.remove('message'),2000)
      if (!btn.classList.contains("hover")) {
        btn.classList.add("hover");
        btn.style.position = "fixed";
      }

      const x = Math.random() * (window.innerWidth - btn.offsetWidth);
      const y = Math.random() * (window.innerHeight - btn.offsetHeight);

      btn.style.left = x + "px";
      btn.style.top = y + "px";
    }

    document.getElementById("yes").addEventListener("click", () => {
      document.querySelector(".container").innerHTML =
        "<h1>Thank you to love me realy !</h1>";
      // Maybe trigger a burst of bubbles?
      for (let i = 0; i < 50; i++) {
        setTimeout(prodBulles, i * 50);
      }
    });

    const prodBulles = () => {
      const bulle = document.createElement("img");
      bulle.src = "/icon.svg";
      bulle.classList.add("bulle");

      // Random Size
      const size = Math.random() * 50 + 20 + "px"; // 20px to 70px
      bulle.style.width = size;
      bulle.style.height = size; // maintain aspect ratio if square svg

      bulle.style.left = Math.random() * 100 + "%";

      // Random Animation Duration (Speed)
      const duration = Math.random() * 15 + 10; // 3s to 8s
      bulle.style.animationDuration = duration + "s";

      // Random Delay
      bulle.style.animationDelay = Math.random() * 2 + "s";

      document.body.appendChild(bulle);

      // Cleanup after animation
      setTimeout(
        () => {
          bulle.remove();
        },
        (duration + 2) * 1000,
      ); // Wait for duration + delay
    };
    setInterval(prodBulles, 800);
    </script>
  </body>
</html>
